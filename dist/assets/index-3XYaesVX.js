import{j as e,B as I,X as H,M as V,a as ee,P as se,b as X,L as te,U as A,S as K,c as Y,m as F,d as E,A as ae,C as T,e as U,F as re,f as M,g as z,h as Z,i as ne,k as le,l as ie,n as oe,o as de,T as ce,p as me,q as $,r as q,s as xe,t as ue,u as he,v as R,w as pe,H as G,x as be,y as ge,z as fe,D as je}from"./ui-QfaNYZEa.js";import{a as ye,r as u,u as B,L as y,O as J,N as Q,b as Ne,c as ve,B as we,R as ke,d as w,e as Se}from"./vendor-CXGqNrWG.js";import{c as Ce}from"./supabase-CRHRt2Ih.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const t of o.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&i(t)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var O={},_=ye;O.createRoot=_.createRoot,O.hydrateRoot=_.hydrateRoot;function Pe(){const[n,l]=u.useState(!1),r=B(),i=JSON.parse(localStorage.getItem("userSession")||"null"),a=()=>{localStorage.removeItem("userSession"),localStorage.removeItem("isAdmin"),r("/login")};return e.jsxs("nav",{className:"bg-secondary text-white shadow-lg sticky top-0 z-50",children:[e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs(y,{to:"/",className:"flex items-center space-x-2 font-bold text-xl font-serif tracking-wide",children:[e.jsx(I,{className:"h-8 w-8 text-secondary-light"}),e.jsx("span",{children:"Desa Cingkrong"})]}),e.jsxs("div",{className:"hidden md:flex items-center space-x-8 font-medium",children:[e.jsx(y,{to:"/",className:"hover:text-accent transition duration-200",children:"Beranda"}),e.jsx(y,{to:"/katalog",className:"hover:text-accent transition duration-200",children:"Katalog Buku"}),i&&e.jsx(y,{to:"/profile",className:"hover:text-accent transition duration-200",children:"Profil"}),!i&&e.jsx(y,{to:"/daftar",className:"hover:text-accent transition duration-200",children:"Daftar Anggota"}),i?e.jsxs("div",{className:"flex items-center space-x-4 pl-4 border-l border-white/20",children:[e.jsxs(y,{to:"/profile",className:"text-accent text-sm hover:text-white transition font-medium flex items-center gap-2",children:["Hai, ",i.name]}),i.role==="admin"&&e.jsx(y,{to:"/admin",className:"text-sm bg-white/10 hover:bg-white/20 px-3 py-1 rounded transition",children:"Panel Admin"}),e.jsx("button",{onClick:a,className:"bg-red-500/80 hover:bg-red-600 px-4 py-1.5 rounded text-sm font-bold transition shadow-sm",children:"Keluar"})]}):e.jsx(y,{to:"/login",className:"bg-accent hover:bg-accent-dark text-secondary px-6 py-2 rounded-full font-bold transition duration-200 shadow-md transform hover:-translate-y-0.5",children:"Masuk"})]}),e.jsx("div",{className:"md:hidden",children:e.jsx("button",{onClick:()=>l(!n),className:"text-white focus:outline-none",children:n?e.jsx(H,{className:"h-6 w-6"}):e.jsx(V,{className:"h-6 w-6"})})})]})}),n&&e.jsx("div",{className:"md:hidden bg-primary-dark p-4 shadow-inner",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx(y,{to:"/",className:"block py-2 hover:text-secondary-light border-b border-primary-light",onClick:()=>l(!1),children:"Beranda"}),e.jsx(y,{to:"/katalog",className:"block py-2 hover:text-secondary-light border-b border-primary-light",onClick:()=>l(!1),children:"Katalog Buku"}),i&&e.jsx(y,{to:"/profile",className:"block py-2 hover:text-secondary-light border-b border-primary-light",onClick:()=>l(!1),children:"Profil Saya"}),!i&&e.jsx(y,{to:"/daftar",className:"block py-2 hover:text-secondary-light",onClick:()=>l(!1),children:"Daftar Anggota"})]})})]})}function De(){return e.jsxs("footer",{className:"bg-secondary-dark text-stone-300 py-10 mt-auto",children:[e.jsxs("div",{className:"container mx-auto px-4 grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold font-serif text-white mb-4",children:"Perpustakaan Desa Cingkrong"}),e.jsx("p",{className:"text-sm leading-relaxed",children:"Membangun masyarakat yang cerdas dan berwawasan luas melalui akses literasi yang mudah dan berkualitas."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-white mb-4",children:"Kontak Kami"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-start space-x-3",children:[e.jsx(ee,{className:"h-5 w-5 text-primary-light mt-1 flex-shrink-0"}),e.jsx("span",{children:"Jl. Raya Purvodadi - Solo KM 5, Desa Cingkrong, Kec. Purvodadi, Kab. Grobogan"})]}),e.jsxs("li",{className:"flex items-center space-x-3",children:[e.jsx(se,{className:"h-5 w-5 text-primary-light flex-shrink-0"}),e.jsx("span",{children:"+62 812-3456-7890"})]}),e.jsxs("li",{className:"flex items-center space-x-3",children:[e.jsx(X,{className:"h-5 w-5 text-primary-light flex-shrink-0"}),e.jsx("span",{children:"perpus.cingkrong@example.com"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-white mb-4",children:"Jam Buka"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex justify-between border-b border-secondary-DEFAULT pb-1",children:[e.jsx("span",{children:"Senin - Kamis"}),e.jsx("span",{className:"font-semibold",children:"08:00 - 16:00"})]}),e.jsxs("li",{className:"flex justify-between border-b border-secondary-DEFAULT pb-1",children:[e.jsx("span",{children:"Jumat"}),e.jsx("span",{className:"font-semibold",children:"08:00 - 11:00"})]}),e.jsxs("li",{className:"flex justify-between border-b border-secondary-DEFAULT pb-1",children:[e.jsx("span",{children:"Sabtu"}),e.jsx("span",{className:"font-semibold",children:"08:00 - 13:00"})]}),e.jsxs("li",{className:"flex justify-between text-secondary-light pt-1",children:[e.jsx("span",{children:"Minggu & Hari Libur"}),e.jsx("span",{children:"Tutup"})]})]})]})]}),e.jsx("div",{className:"border-t border-secondary-DEFAULT mt-8 pt-8 text-center text-sm",children:e.jsxs("p",{children:["Â© ",new Date().getFullYear()," Perpustakaan Desa Cingkrong. Hak Cipta Dilindungi."]})})]})}function Be(){return e.jsxs("div",{className:"flex flex-col min-h-screen font-sans bg-background",children:[e.jsx(Pe,{}),e.jsx("main",{className:"flex-grow animate-fade-in",children:e.jsx(J,{})}),e.jsx(De,{})]})}function Ae(){return localStorage.getItem("isAdmin")==="true"?e.jsx(J,{}):e.jsx(Q,{to:"/login",replace:!0})}function Le(){const[n,l]=u.useState(!0),r=Ne(),i=B(),a=()=>{localStorage.removeItem("isAdmin"),i("/login")},o=[{path:"/admin/dashboard",icon:te,label:"Dashboard"},{path:"/admin/books",icon:I,label:"Kelola Buku"},{path:"/admin/members",icon:A,label:"Anggota"},{path:"/admin/settings",icon:K,label:"Pengaturan"}];return e.jsxs("div",{className:"flex h-screen bg-stone-100",children:[e.jsxs("aside",{className:`${n?"w-64":"w-20"} bg-secondary text-white transition-all duration-300 flex flex-col fixed md:relative z-30 h-full`,children:[e.jsxs("div",{className:"p-4 flex items-center justify-between border-b border-white/10 h-16",children:[e.jsx("span",{className:`font-serif font-bold text-xl truncate ${!n&&"hidden"}`,children:"Admin Panel"}),e.jsx("button",{onClick:()=>l(!n),className:"p-1 hover:bg-white/10 rounded",children:n?e.jsx(H,{size:20}):e.jsx(V,{size:20})})]}),e.jsx("nav",{className:"flex-1 py-6 space-y-2 px-2",children:o.map(t=>e.jsxs(y,{to:t.path,className:`flex items-center space-x-3 px-3 py-3 rounded-lg transition-colors ${r.pathname===t.path?"bg-accent text-secondary font-bold shadow-md":"hover:bg-white/10 text-stone-300 hover:text-white"}`,children:[e.jsx(t.icon,{size:20}),n&&e.jsx("span",{children:t.label})]},t.path))}),e.jsx("div",{className:"p-4 border-t border-white/10",children:e.jsxs("button",{onClick:a,className:"flex items-center space-x-3 w-full px-3 py-2 text-red-300 hover:bg-red-500/20 hover:text-red-100 rounded-lg transition-colors",children:[e.jsx(Y,{size:20}),n&&e.jsx("span",{children:"Keluar"})]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("header",{className:"bg-white h-16 border-b border-stone-200 flex items-center justify-between px-6 shadow-sm",children:[e.jsx("h2",{className:"font-bold text-primary-dark text-lg capitalize",children:r.pathname.split("/").pop()}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary flex items-center justify-center text-white font-bold",children:"A"}),e.jsx("span",{className:"text-sm font-medium text-text-primary",children:"Admin"})]})})]}),e.jsx("main",{className:"flex-1 overflow-auto p-6",children:e.jsx(J,{})})]})]})}function Ie(){const n=JSON.parse(localStorage.getItem("userSession")||"null");return e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("section",{className:"relative bg-primary-dark text-white py-20 lg:py-32 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary to-secondary opacity-90 z-10"}),e.jsx("div",{className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1507842217121-9e691b2d0941?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80')] bg-cover bg-center"}),e.jsx("div",{className:"container mx-auto px-4 relative z-20",children:e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"max-w-3xl",children:[e.jsxs("h1",{className:"text-4xl md:text-6xl font-bold font-serif mb-6 leading-tight",children:["Jendela Dunia di"," ",e.jsx("span",{className:"text-accent",children:"Desa Cingkrong"})]}),e.jsx("p",{className:"text-lg md:text-xl text-stone-200 mb-8 leading-relaxed max-w-2xl",children:"Selamat datang di pusat literasi dan kreativitas masyarakat. Mari membaca, berkarya, dan berinovasi bersama Perpustakaan Desa."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs(y,{to:"/katalog",className:"inline-flex items-center justify-center px-8 py-3 bg-accent hover:bg-accent-dark text-secondary font-bold rounded-lg transition duration-300 shadow-lg group",children:[e.jsx(E,{className:"mr-2 h-5 w-5"}),"Cari Buku",e.jsx(ae,{className:"ml-2 h-4 w-4 transform group-hover:translate-x-1 transition"})]}),n?e.jsxs(y,{to:"/profile",className:"inline-flex items-center justify-center px-8 py-3 bg-transparent border-2 border-white hover:bg-white/10 text-white font-semibold rounded-lg transition duration-300",children:[e.jsx(A,{className:"mr-2 h-5 w-5"}),"Lihat Profil"]}):e.jsxs(y,{to:"/daftar",className:"inline-flex items-center justify-center px-8 py-3 bg-transparent border-2 border-white hover:bg-white/10 text-white font-semibold rounded-lg transition duration-300",children:[e.jsx(A,{className:"mr-2 h-5 w-5"}),"Daftar Anggota"]})]})]})})]}),e.jsx("section",{className:"py-16 bg-background",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 -mt-24 relative z-30",children:[{icon:E,title:"Koleksi Lengkap",desc:"Ribuan judul buku dari berbagai kategori seperti pertanian, agama, dan teknologi."},{icon:T,title:"Jam Operasional",desc:"Buka setiap hari kerja untuk melayani kebutuhan literasi Anda."},{icon:A,title:"Komunitas Pembaca",desc:"Bergabung dengan klub buku dan kegiatan literasi rutin."}].map((l,r)=>e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:r*.2},className:"bg-white p-8 rounded-xl shadow-xl border-t-4 border-secondary hover:transform hover:-translate-y-1 transition duration-300 flex flex-col items-start",children:[e.jsx("div",{className:"bg-primary/10 p-3 rounded-full mb-4",children:e.jsx(l.icon,{className:"h-8 w-8 text-primary"})}),e.jsx("h3",{className:"text-xl font-bold mb-2 text-primary-dark",children:l.title}),e.jsx("p",{className:"text-text-secondary text-sm leading-relaxed",children:l.desc})]},r))})})}),e.jsx("section",{className:"py-20 bg-stone-100",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-12",children:[e.jsxs("div",{className:"md:w-1/2 relative",children:[e.jsx("div",{className:"absolute -top-4 -left-4 w-24 h-24 bg-secondary/20 rounded-full z-0"}),e.jsx("img",{src:"https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",alt:"Reading",className:"rounded-lg shadow-2xl relative z-10"}),e.jsx("div",{className:"absolute -bottom-4 -right-4 w-32 h-32 bg-primary/10 rounded-full z-0"})]}),e.jsxs("div",{className:"md:w-1/2",children:[e.jsx("h2",{className:"text-3xl font-bold font-serif text-primary-dark mb-6",children:"Membangun Generasi Cerdas"}),e.jsx("p",{className:"text-text-secondary mb-6 leading-relaxed",children:"Perpustakaan Desa Cingkrong hadir bukan hanya sebagai tempat meminjam buku, tetapi sebagai pusat kegiatan masyarakat. Kami berkomitmen untuk menyediakan akses informasi yang merata bagi seluruh warga desa, mendukung pendidikan, dan melestarikan budaya lokal melalui literasi."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-l-4 border-primary p-4 bg-white shadow-sm rounded-r-lg",children:[e.jsx("h4",{className:"font-bold text-lg text-primary-dark mb-1",children:"Visi"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"Terwujudnya masyarakat Desa Cingkrong yang gemar membaca, cerdas, berinformasi, dan sejahtera."})]}),e.jsxs("div",{className:"border-l-4 border-primary p-4 bg-white shadow-sm rounded-r-lg",children:[e.jsx("h4",{className:"font-bold text-lg text-primary-dark mb-1",children:"Misi"}),e.jsxs("ul",{className:"text-sm text-text-secondary list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Menyediakan bahan pustaka yang berkualitas dan relevan."}),e.jsx("li",{children:"Meningkatkan minat baca masyarakat melalui program kreatif."}),e.jsx("li",{children:"Memfasilitasi kegiatan belajar sepanjang hayat."})]})]})]})]})]})})}),e.jsx("section",{className:"py-20 bg-primary text-white text-center",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx("h2",{className:"text-3xl font-bold font-serif mb-4",children:"Siap Memulai Petualangan Literasi?"}),e.jsx("p",{className:"mb-8 text-primary-light max-w-2xl mx-auto",children:"Bergabunglah menjadi anggota sekarang gratis dan nikmati akses ke ribuan koleksi buku kami."}),n?e.jsx(y,{to:"/katalog",className:"inline-block px-10 py-4 bg-secondary hover:bg-secondary-light text-white font-bold rounded-full shadow-lg transition duration-300 transform hover:scale-105",children:"Jelajahi Koleksi Buku"}):e.jsx(y,{to:"/daftar",className:"inline-block px-10 py-4 bg-secondary hover:bg-secondary-light text-white font-bold rounded-full shadow-lg transition duration-300 transform hover:scale-105",children:"Daftar Anggota Sekarang"})]})})]})}const Ee="https://csxjynapdlzcutgwmrkx.supabase.co",Te="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNzeGp5bmFwZGx6Y3V0Z3dtcmt4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjcxOTU0NjksImV4cCI6MjA4Mjc3MTQ2OX0.zfN87x9nd1Bf_FRW15GAjw1HPUdKihaGAkv32PndbO0",k=Ce(Ee,Te),W=u.createContext(void 0);function ze({children:n}){const[l,r]=u.useState([]),[i,a]=u.useState([]),[o,t]=u.useState([]),[d,p]=u.useState(!0),s=async()=>{try{p(!0);const{data:m,error:b}=await k.from("books").select("*").order("id",{ascending:!0});console.log("DEBUG: Fetch Books Result:",{booksData:m,booksError:b}),b&&console.error("DEBUG: Error fetching books:",b),m?(console.log(`DEBUG: Found ${m.length} books.`),r(m)):console.warn("DEBUG: No books data found (might be empty array or RLS).");const{data:h}=await k.from("profiles").select("*");h&&a(h.map(x=>({id:x.id,name:x.name,email:x.email||"",role:x.role||"member",status:x.status||"active",joinDate:x.join_date||"",password:x.password||"user123"})));const{data:v}=await k.from("loans").select("*");v&&t(v.map(x=>({id:x.id,bookId:x.book_id,memberId:x.member_id,loanDate:x.loan_date,dueDate:x.due_date,status:x.status})))}catch(m){console.error("Fetch error:",m)}finally{p(!1)}};u.useEffect(()=>{s();const m=k.channel("custom-all-channel").on("postgres_changes",{event:"*",schema:"public",table:"books"},()=>s()).on("postgres_changes",{event:"*",schema:"public",table:"loans"},()=>s()).on("postgres_changes",{event:"*",schema:"public",table:"profiles"},()=>s()).subscribe();return()=>{k.removeChannel(m)}},[]);const f=async m=>{await k.from("books").insert([m]),s()},N=m=>{r(l.filter(b=>b.id!==m))},j=(m,b)=>{a(i.map(h=>h.id===m?{...h,status:b}:h))},C=async m=>{console.log("=== REGISTER REQUEST ===",m);try{const{data:b,error:h}=await k.auth.signUp({email:m.email,password:m.password||"user123"});if(console.log("Supabase Auth Result:",{authData:b,authError:h}),h)throw console.error("Auth Failed:",h.message),h;if(b.user){console.log("User created! ID:",b.user.id);const v={id:b.user.id,name:m.name,email:m.email,password:m.password,role:"member",status:"active",join_date:new Date().toISOString().split("T")[0]};console.log("Inserting Profile:",v);const{error:x}=await k.from("profiles").insert([v]);if(x)throw console.error("Profile Insert Failed:",x),x;console.log("Profile Inserted Successfully"),s(),alert("Registrasi berhasil! Silakan login.")}else console.warn("No User returned. Email confirmation required?"),alert("Registrasi berhasil, tetapi user belum aktif. Cek email konfirmasi Anda.")}catch(b){throw console.error("Registration Exception:",b),alert("Gagal registrasi: "+b.message),b}},S=async(m,b)=>{try{const h=new Date,v=new Date(h);v.setDate(v.getDate()+7);const x={book_id:m,member_id:b,loan_date:h.toISOString().split("T")[0],due_date:v.toISOString().split("T")[0],status:"borrowed"};console.log("DEBUG: Borrowing Book...",x);const{error:L}=await k.from("loans").insert([x]);if(L)throw L;const c=l.find(g=>g.id===m);if(c&&c.stock>0){const{error:g}=await k.from("books").update({stock:c.stock-1}).eq("id",m);g&&console.error("Failed to update stock:",g)}console.log("Borrow success!"),s(),alert("Peminjaman berhasil dicatat!")}catch(h){console.error("Borrow Error:",h)}},P=async(m,b)=>{try{console.log("DEBUG: Returning Book...",{loanId:m,bookId:b});const{error:h}=await k.from("loans").update({status:"returned"}).eq("id",m);if(h)throw h;const v=l.find(x=>x.id===b);if(v){const{error:x}=await k.from("books").update({stock:v.stock+1}).eq("id",b);x&&console.error("Failed to update stock:",x)}console.log("Return success!"),s(),alert("Buku berhasil dikembalikan!")}catch(h){console.error("Return Error:",h),alert("Gagal mengembalikan buku: "+h.message)}};return e.jsx(W.Provider,{value:{books:l,members:i,loans:o,addBook:f,deleteBook:N,updateMemberStatus:j,registerMember:C,borrowBook:S,returnBook:P},children:n})}function D(){const n=u.useContext(W);if(n===void 0)throw new Error("useData must be used within a DataProvider");return n}const Me=["Semua","Pertanian","Teknologi","Fiksi","Agama","Anak","Pendidikan"];function Re(){const n=B(),{books:l,borrowBook:r}=D(),[i,a]=u.useState(""),[o,t]=u.useState("Semua"),d=s=>{const f=localStorage.getItem("userSession");if(!f){alert("Silakan login terlebih dahulu untuk meminjam buku."),n("/login");return}const N=JSON.parse(f);r(s,N.id),alert("Buku berhasil dipinjam! Cek riwayat peminjaman di profil Anda.")},p=l.filter(s=>{const f=s.title.toLowerCase().includes(i.toLowerCase())||s.author.toLowerCase().includes(i.toLowerCase()),N=o==="Semua"||s.category===o;return f&&N});return e.jsxs("div",{className:"container mx-auto px-4 py-12 min-h-[80vh]",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold font-serif text-primary-dark mb-4",children:"Katalog Buku Desa"}),e.jsx("p",{className:"text-text-secondary max-w-2xl mx-auto",children:"Temukan koleksi buku menarik untuk menambah wawasan dan pengetahuan Anda."})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center bg-white p-6 rounded-lg shadow-md mb-12 gap-6",children:[e.jsxs("div",{className:"relative w-full lg:w-1/3",children:[e.jsx(U,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{type:"text",placeholder:"Cari judul buku atau penulis...",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition",value:i,onChange:s=>a(s.target.value)})]}),e.jsxs("div",{className:"flex items-center space-x-4 w-full lg:w-auto overflow-x-auto pb-2 lg:pb-0 scrollbar-hide",children:[e.jsx(re,{className:"text-secondary h-5 w-5 flex-shrink-0"}),e.jsx("div",{className:"flex space-x-2",children:Me.map(s=>e.jsx("button",{onClick:()=>t(s),className:`px-4 py-2 rounded-full text-sm font-medium transition whitespace-nowrap ${o===s?"bg-secondary text-white shadow-md":"bg-stone-100 text-stone-600 hover:bg-stone-200"}`,children:s},s))})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:p.map(s=>e.jsxs("div",{className:"bg-surface rounded-lg shadow-sm hover:shadow-md transition-shadow duration-300 overflow-hidden border border-slate-200 flex flex-col h-full",children:[e.jsxs("div",{className:"relative h-64 overflow-hidden bg-slate-100",children:[e.jsx("img",{src:s.cover,alt:s.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("span",{className:`px-3 py-1 rounded text-xs font-semibold text-white shadow-sm ${s.stock>0?"bg-primary":"bg-stone-500"}`,children:s.stock>0?"Tersedia":"Dipinjam"})})]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[e.jsx("span",{className:"text-xs font-bold text-primary tracking-wide uppercase mb-2",children:s.category}),e.jsx("h3",{className:"text-lg font-bold text-text-primary mb-2 leading-snug line-clamp-2",children:s.title}),e.jsx("p",{className:"text-sm text-text-secondary mb-4 flex-grow",children:s.author}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{to:`/book/${s.id}`,className:"flex-1 text-center py-2 bg-stone-100 text-stone-700 font-bold rounded shadow-sm hover:bg-stone-200 transition-colors duration-200",children:"Detail"}),e.jsx("button",{onClick:()=>d(s.id),disabled:s.stock<=0,className:`flex-1 py-2 font-bold rounded shadow-sm transition-colors duration-200 ${s.stock>0?"bg-accent text-secondary hover:bg-accent-dark":"bg-stone-300 text-stone-500 cursor-not-allowed"}`,children:s.stock>0?"Pinjam":"Habis"})]})]})]},s.id))}),p.length===0&&e.jsxs("div",{className:"text-center py-20 bg-stone-50 rounded-lg border-2 border-dashed border-stone-200",children:[e.jsx("p",{className:"text-xl text-stone-500",children:"Buku tidak ditemukan."}),e.jsx("button",{onClick:()=>{a(""),t("Semua")},className:"mt-4 text-primary font-semibold hover:underline",children:"Reset Pencarian"})]})]})}function Ke(){const{registerMember:n}=D(),l=B(),[r,i]=u.useState({name:"",email:"",password:"",confirmPassword:""}),[a,o]=u.useState("");u.useEffect(()=>{localStorage.getItem("userSession")&&l("/profile")},[l]);const t=async d=>{if(d.preventDefault(),r.password!==r.confirmPassword){o("Password tidak sama");return}try{await n({name:r.name,email:r.email.trim().toLowerCase(),password:r.password}),l("/login")}catch{}};return e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold font-serif text-primary-dark mb-4",children:"Daftar Anggota"}),e.jsx("p",{className:"text-text-secondary",children:"Bergabunglah dengan perpustakaan desa kami."})]}),e.jsx("div",{className:"bg-white p-8 rounded-2xl shadow-xl border-t-8 border-secondary",children:e.jsxs("form",{onSubmit:t,className:"space-y-6",children:[a&&e.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded text-sm text-center",children:a}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-semibold text-text-primary",children:"Nama Lengkap"}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-stone-400 h-5 w-5"}),e.jsx("input",{required:!0,type:"text",className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary outline-none",placeholder:"Nama Lengkap",value:r.name,onChange:d=>i({...r,name:d.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-semibold text-text-primary",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(X,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-stone-400 h-5 w-5"}),e.jsx("input",{required:!0,type:"email",className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary outline-none",placeholder:"Email",value:r.email,onChange:d=>i({...r,email:d.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-semibold text-text-primary",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-stone-400 h-5 w-5"}),e.jsx("input",{required:!0,type:"password",className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary outline-none",placeholder:"Password",value:r.password,onChange:d=>i({...r,password:d.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-semibold text-text-primary",children:"Konfirmasi Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-stone-400 h-5 w-5"}),e.jsx("input",{required:!0,type:"password",className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary outline-none",placeholder:"Ulangi Password",value:r.confirmPassword,onChange:d=>i({...r,confirmPassword:d.target.value})})]})]}),e.jsx("button",{type:"submit",className:"w-full py-3 bg-primary hover:bg-primary-dark text-white font-bold rounded-lg shadow-lg hover:shadow-xl transition",children:"Daftar Sekarang"})]})})]})})}function Oe(){const{members:n}=D(),[l,r]=u.useState(""),[i,a]=u.useState(""),[o,t]=u.useState(""),d=B(),p=async s=>{s.preventDefault(),t("");try{console.log("Attempting Login:",{email:l.trim(),password:i});const{data:f,error:N}=await k.auth.signInWithPassword({email:l.trim(),password:i});if(N)throw N;if(f.user){const{data:j,error:C}=await k.from("profiles").select("*").eq("id",f.user.id).single();C&&console.error("Profile missing:",C);const S=(j==null?void 0:j.role)||"member",P=(j==null?void 0:j.name)||f.user.email;if(localStorage.setItem("userSession",JSON.stringify({role:S,name:P,id:f.user.id,email:f.user.email,joinDate:(j==null?void 0:j.join_date)||new Date().toISOString().split("T")[0]})),S==="admin")localStorage.setItem("isAdmin","true"),d("/admin/dashboard");else{if((j==null?void 0:j.status)==="blocked")throw new Error("Akun Anda diblokir. Hubungi admin.");d("/profile")}}}catch(f){console.error("Login Error:",f);let N=f.message||"Login gagal.";N.includes("Invalid login credentials")&&(N="Email atau Password salah. (Atau email belum dikonfirmasi)"),t(N)}};return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-xl overflow-hidden border border-stone-100",children:[e.jsxs("div",{className:"bg-secondary p-8 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold font-serif text-white mb-2",children:"Perpustakaan Desa"}),e.jsx("p",{className:"text-secondary-light",children:"Masuk ke Akun Anda"})]}),e.jsxs("form",{onSubmit:p,className:"p-8 space-y-6",children:[o&&e.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm text-center font-medium border border-red-100",children:o}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-stone-400 h-5 w-5"}),e.jsx("input",{type:"text",value:l,onChange:s=>r(s.target.value),className:"w-full pl-10 pr-4 py-3 border border-stone-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition",placeholder:"Masukkan email"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-stone-400 h-5 w-5"}),e.jsx("input",{type:"password",value:i,onChange:s=>a(s.target.value),className:"w-full pl-10 pr-4 py-3 border border-stone-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition",placeholder:"Masukkan password"})]})]})]}),e.jsx("button",{type:"submit",className:"w-full py-3 bg-primary hover:bg-primary-dark text-white font-bold rounded-lg transition duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"Masuk"}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("p",{className:"text-text-secondary text-sm",children:["Belum punya akun?"," ",e.jsx(y,{to:"/daftar",className:"text-primary font-bold hover:underline",children:"Daftar disini"})]})})]})]})})}function Ue(){const{id:n}=ve(),l=B(),{books:r,borrowBook:i}=D(),[a,o]=u.useState(null),t=()=>{const d=localStorage.getItem("userSession");if(!d){alert("Silakan login terlebih dahulu untuk meminjam buku."),l("/login");return}if(a){const p=JSON.parse(d);i(a.id,p.id),alert(`Buku "${a.title}" berhasil dipinjam!`),l("/profile")}};return u.useEffect(()=>{if(n){const d=r.find(p=>p.id===parseInt(n));d?o(d):l("/katalog")}},[n,r,l]),a?e.jsxs("div",{className:"container mx-auto px-4 py-12 min-h-[80vh]",children:[e.jsxs("button",{onClick:()=>l(-1),className:"flex items-center text-text-secondary hover:text-primary mb-8 transition",children:[e.jsx(Z,{className:"h-5 w-5 mr-2"}),"Kembali"]}),e.jsx("div",{className:"bg-white rounded-xl shadow-xl overflow-hidden",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsx("div",{className:"md:w-1/3 lg:w-1/4 bg-stone-100 p-8 flex items-center justify-center",children:e.jsxs("div",{className:"relative shadow-2xl rounded-lg overflow-hidden w-64 md:w-full max-w-[300px] aspect-[2/3]",children:[e.jsx("img",{src:a.cover,alt:a.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("span",{className:`px-4 py-1.5 rounded-full text-sm font-bold text-white shadow-md ${a.stock>0?"bg-primary":"bg-stone-500"}`,children:a.stock>0?"Tersedia":"Stok Habis"})})]})}),e.jsxs("div",{className:"md:w-2/3 lg:w-3/4 p-8 md:p-12 flex flex-col",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("span",{className:"inline-block bg-accent/20 text-accent-dark px-3 py-1 rounded text-xs font-bold tracking-wider uppercase mb-3",children:a.category}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-primary-dark font-serif mb-2 leading-tight",children:a.title}),e.jsxs("div",{className:"flex items-center text-text-secondary text-lg",children:[e.jsx(M,{className:"h-5 w-5 mr-2"}),e.jsx("span",{children:a.author})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 mb-8 bg-stone-50 p-6 rounded-xl border border-stone-100",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-3 bg-white rounded-lg shadow-sm",children:e.jsx(E,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-secondary font-medium",children:"Kategori"}),e.jsx("p",{className:"font-bold text-primary-dark",children:a.category})]})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-3 bg-white rounded-lg shadow-sm",children:e.jsx(ne,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-secondary font-medium",children:"Stok Buku"}),e.jsxs("p",{className:"font-bold text-primary-dark",children:[a.stock," Exemplar"]})]}),e.jsx("div",{className:"flex gap-4 mb-8",children:e.jsx("button",{onClick:t,disabled:a.stock<=0,className:`px-8 py-3 rounded-xl font-bold text-lg shadow-lg transition-transform transform hover:-translate-y-1 ${a.stock>0?"bg-accent text-secondary hover:bg-accent-dark":"bg-stone-300 text-stone-500 cursor-not-allowed shadow-none hover:translate-y-0"}`,children:a.stock>0?"Pinjam Buku Ini":"Stok Habis"})})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-xl font-bold text-primary-dark mb-3",children:"Sinopsis"}),e.jsx("p",{className:"text-text-secondary leading-relaxed",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur."})]}),a.stock<=0&&e.jsxs("div",{className:"mt-auto bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-lg flex items-start",children:[e.jsx("div",{className:"mr-3 mt-0.5",children:e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-sm",children:"Buku Sedang Tidak Tersedia"}),e.jsx("p",{className:"text-sm opacity-90",children:"Maaf, saat ini stok buku ini sedang kosong atau dipinjam semua. Silakan cek kembali nanti."})]})]})]})]})})]}):null}function Je(){const{books:n,members:l,loans:r,returnBook:i}=D(),a=n.reduce((s,f)=>s+f.stock,0),o=l.filter(s=>s.status==="active").length,t=r.filter(s=>s.status==="borrowed"||s.status==="overdue").length,d=r.filter(s=>s.status==="overdue").length,p=[{label:"Total Judul",value:n.length.toLocaleString(),icon:E,color:"bg-primary-light",textColor:"text-primary-dark"},{label:"Total Eksemplar",value:a.toLocaleString(),icon:le,color:"bg-emerald-100",textColor:"text-emerald-800"},{label:"Anggota Aktif",value:o.toLocaleString(),icon:A,color:"bg-blue-100",textColor:"text-blue-800"},{label:"Buku Dipinjam",value:t.toString(),icon:T,color:"bg-secondary/20",textColor:"text-secondary"},{label:"Jatuh Tempo",value:d.toString(),icon:ie,color:"bg-red-100",textColor:"text-red-800"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold font-serif text-primary-dark",children:"Dashboard Overview"}),e.jsx("p",{className:"text-text-secondary",children:"Statistik perpustakaan terkini."})]}),e.jsx("button",{className:"bg-primary hover:bg-primary-dark text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors shadow",children:"Download Laporan"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6",children:p.map(s=>e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-stone-100 flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-text-secondary mb-1",children:s.label}),e.jsx("h3",{className:"text-2xl font-bold text-text-primary",children:s.value})]}),e.jsx("div",{className:`p-3 rounded-lg ${s.color} ${s.textColor}`,children:e.jsx(s.icon,{size:24})})]},s.label))}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-stone-100 p-6",children:[e.jsx("h3",{className:"font-bold text-lg text-primary-dark mb-4",children:"Peminjaman Terbaru"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-stone-200 text-text-secondary text-sm",children:[e.jsx("th",{className:"pb-3 font-medium",children:"Anggota"}),e.jsx("th",{className:"pb-3 font-medium",children:"Buku"}),e.jsx("th",{className:"pb-3 font-medium",children:"Tanggal Pinjam"}),e.jsx("th",{className:"pb-3 font-medium",children:"Status"}),e.jsx("th",{className:"pb-3 font-medium",children:"Aksi"})]})}),e.jsx("tbody",{className:"text-sm text-text-primary",children:r.map(s=>{const f=l.find(j=>j.id===s.memberId),N=n.find(j=>j.id===s.bookId);return e.jsxs("tr",{className:"border-b border-stone-100 last:border-0 hover:bg-stone-50",children:[e.jsx("td",{className:"py-4 font-medium",children:f?f.name:"Unknown Member"}),e.jsx("td",{className:"py-4 text-text-secondary",children:N?N.title:"Unknown Book"}),e.jsx("td",{className:"py-4",children:new Date(s.loanDate).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})}),e.jsx("td",{className:"py-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold capitalize ${s.status==="borrowed"?"bg-blue-100 text-blue-700":s.status==="returned"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:s.status==="borrowed"?"Dipinjam":s.status==="returned"?"Dikembalikan":"Terlambat"})}),e.jsx("td",{className:"py-4",children:s.status!=="returned"&&e.jsx("button",{onClick:()=>{confirm("Apakah buku ini sudah dikembalikan?")&&i(s.id,s.bookId)},className:"bg-primary hover:bg-primary-dark text-white px-3 py-1 rounded text-xs transition",children:"Kembalikan"})})]},s.id)})})]})})]})]})}function Fe(){const{books:n,addBook:l,deleteBook:r}=D(),[i,a]=u.useState(!1),[o,t]=u.useState({title:"",author:"",category:"",stock:1}),d=s=>{s.preventDefault(),l({...o,stock:Number(o.stock),cover:"https://images.unsplash.com/photo-1543002588-bfa74002ed7e?auto=format&fit=crop&w=800&q=80"}),a(!1),t({title:"",author:"",category:"",stock:1})},p=s=>{confirm("Yakin ingin menghapus buku ini?")&&r(s)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold font-serif text-primary-dark",children:"Kelola Buku"}),e.jsx("p",{className:"text-text-secondary",children:"Daftar koleksi buku perpustakaan."})]}),e.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 bg-primary hover:bg-primary-dark text-white px-4 py-2 rounded-lg font-medium shadow-sm transition-colors",children:[e.jsx(oe,{size:18}),"Tambah Buku"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-stone-100 flex items-center gap-3",children:[e.jsx(U,{className:"text-stone-400",size:20}),e.jsx("input",{type:"text",placeholder:"Cari judul atau penulis...",className:"flex-1 outline-none text-text-primary placeholder:text-stone-400"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-stone-100 overflow-hidden",children:[e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-stone-50 border-b border-stone-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 font-semibold text-text-secondary text-sm",children:"Judul"}),e.jsx("th",{className:"px-6 py-4 font-semibold text-text-secondary text-sm",children:"Penulis"}),e.jsx("th",{className:"px-6 py-4 font-semibold text-text-secondary text-sm",children:"Kategori"}),e.jsx("th",{className:"px-6 py-4 font-semibold text-text-secondary text-sm text-center",children:"Stok"}),e.jsx("th",{className:"px-6 py-4 font-semibold text-text-secondary text-sm text-center",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-stone-100",children:n.map(s=>e.jsxs("tr",{className:"hover:bg-stone-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-text-primary",children:s.title}),e.jsx("td",{className:"px-6 py-4 text-text-secondary",children:s.author}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 bg-primary/10 text-primary-dark rounded text-xs font-semibold uppercase",children:s.category})}),e.jsx("td",{className:"px-6 py-4 text-center font-bold text-text-primary",children:s.stock}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition",children:e.jsx(de,{size:18})}),e.jsx("button",{onClick:()=>p(s.id),className:"p-2 text-red-600 hover:bg-red-50 rounded transition",children:e.jsx(ce,{size:18})})]})})]},s.id))})]}),n.length===0&&e.jsx("div",{className:"p-8 text-center text-stone-500",children:"Belum ada buku."})]}),i&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-6 animate-in zoom-in-95 duration-200",children:[e.jsx("h3",{className:"text-xl font-bold font-serif text-primary-dark mb-4",children:"Tambah Buku Baru"}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Judul Buku"}),e.jsx("input",{required:!0,type:"text",className:"w-full p-2 border border-stone-300 rounded focus:ring-2 focus:ring-primary outline-none",value:o.title,onChange:s=>t({...o,title:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Penulis"}),e.jsx("input",{required:!0,type:"text",className:"w-full p-2 border border-stone-300 rounded focus:ring-2 focus:ring-primary outline-none",value:o.author,onChange:s=>t({...o,author:s.target.value})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Kategori"}),e.jsxs("select",{className:"w-full p-2 border border-stone-300 rounded focus:ring-2 focus:ring-primary outline-none bg-white",value:o.category,onChange:s=>t({...o,category:s.target.value}),children:[e.jsx("option",{value:"",children:"Pilih..."}),e.jsx("option",{value:"Pertanian",children:"Pertanian"}),e.jsx("option",{value:"Teknologi",children:"Teknologi"}),e.jsx("option",{value:"Agama",children:"Agama"}),e.jsx("option",{value:"Fiksi",children:"Fiksi"})]})]}),e.jsxs("div",{className:"w-1/3",children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Stok"}),e.jsx("input",{type:"number",min:"1",className:"w-full p-2 border border-stone-300 rounded focus:ring-2 focus:ring-primary outline-none",value:o.stock,onChange:s=>t({...o,stock:Number(s.target.value)})})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-stone-100",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 px-4 py-2 text-stone-600 hover:bg-stone-100 rounded font-medium transition",children:"Batal"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-primary hover:bg-primary-dark text-white rounded font-medium shadow-md hover:shadow-lg transition",children:"Simpan"})]})]})]})})]})}function $e(){const{members:n,updateMemberStatus:l}=D(),[r,i]=u.useState(""),a=(t,d)=>{l(t,d)},o=n.filter(t=>t.name.toLowerCase().includes(r.toLowerCase())||t.email.toLowerCase().includes(r.toLowerCase()));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold font-serif text-primary-dark",children:"Kelola Anggota"}),e.jsx("p",{className:"text-text-secondary",children:"Verifikasi dan kelola data anggota perpustakaan."})]}),e.jsx("div",{className:"bg-white p-2 rounded-lg shadow-sm border border-stone-100 flex items-center gap-2",children:e.jsxs("span",{className:"text-xs font-bold text-stone-500 uppercase px-2",children:["Total: ",n.length]})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-stone-100 flex items-center gap-3",children:[e.jsx(U,{className:"text-stone-400",size:20}),e.jsx("input",{type:"text",placeholder:"Cari nama atau email...",className:"flex-1 outline-none text-text-primary placeholder:text-stone-400",value:r,onChange:t=>i(t.target.value)})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-stone-100 overflow-hidden",children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-stone-50 border-b border-stone-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 font-semibold text-text-secondary text-sm",children:"Nama Lengkap"}),e.jsx("th",{className:"px-6 py-4 font-semibold text-text-secondary text-sm",children:"Peran"}),e.jsx("th",{className:"px-6 py-4 font-semibold text-text-secondary text-sm",children:"Status"}),e.jsx("th",{className:"px-6 py-4 font-semibold text-text-secondary text-sm",children:"Tanggal Gabung"}),e.jsx("th",{className:"px-6 py-4 font-semibold text-text-secondary text-sm text-center",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-stone-100",children:o.map(t=>e.jsxs("tr",{className:"hover:bg-stone-50 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-primary",children:t.name}),e.jsx("div",{className:"text-xs text-text-secondary",children:t.email})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{size:14,className:"text-secondary"}),e.jsx("span",{className:"text-text-primary text-sm",children:t.role})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-semibold capitalize ${t.status==="active"?"bg-green-100 text-green-700":t.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[t.status==="active"&&e.jsx($,{size:12}),t.status==="blocked"&&e.jsx(q,{size:12}),t.status]})}),e.jsx("td",{className:"px-6 py-4 text-text-secondary text-sm",children:new Date(t.joinDate).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"flex justify-center gap-2 opacity-100 sm:opacity-0 group-hover:opacity-100 transition-opacity",children:[t.status==="pending"&&e.jsx("button",{onClick:()=>a(t.id,"active"),className:"bg-primary hover:bg-primary-dark text-white px-3 py-1.5 rounded text-xs font-bold shadow-sm transition-colors",children:"Verifikasi"}),t.status==="active"&&e.jsx("button",{onClick:()=>a(t.id,"blocked"),className:"text-red-600 hover:bg-red-50 p-2 rounded transition",title:"Blokir Anggota",children:e.jsx(q,{size:18})}),t.status==="blocked"&&e.jsx("button",{onClick:()=>a(t.id,"active"),className:"text-green-600 hover:bg-green-50 p-2 rounded transition",title:"Aktifkan Kembali",children:e.jsx($,{size:18})}),e.jsx("button",{className:"text-stone-400 hover:text-secondary p-2 rounded hover:bg-stone-100 transition",children:e.jsx(xe,{size:18})})]})})]},t.id))})]}),o.length===0&&e.jsx("div",{className:"p-12 text-center text-stone-500",children:"Data anggota tidak ditemukan."})]})})]})}function qe(){const[n,l]=u.useState("general"),[r,i]=u.useState({libraryName:"Perpustakaan Desa Cingkrong",address:"Jl. Raya Cingkrong No. 45, Grobogan",email:"perpus.cingkrong@example.com",phone:"0812-3456-7890"}),[a,o]=u.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[t,d]=u.useState({email:!0,newMember:!0,overdue:!0,weeklyReport:!1}),p=s=>{s.preventDefault(),alert("Pengaturan berhasil disimpan!")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold font-serif text-primary-dark",children:"Pengaturan"}),e.jsx("p",{className:"text-text-secondary",children:"Kelola informasi perpustakaan dan keamanan akun."})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"w-full lg:w-64 space-y-2",children:[e.jsxs("button",{onClick:()=>l("general"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg font-medium transition-colors ${n==="general"?"bg-white text-primary shadow-sm border border-stone-200":"text-text-secondary hover:bg-stone-100"}`,children:[e.jsx(ue,{size:18}),"Umum"]}),e.jsxs("button",{onClick:()=>l("security"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg font-medium transition-colors ${n==="security"?"bg-white text-primary shadow-sm border border-stone-200":"text-text-secondary hover:bg-stone-100"}`,children:[e.jsx(z,{size:18}),"Keamanan"]}),e.jsxs("button",{onClick:()=>l("notifications"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg font-medium transition-colors ${n==="notifications"?"bg-white text-primary shadow-sm border border-stone-200":"text-text-secondary hover:bg-stone-100"}`,children:[e.jsx(he,{size:18}),"Notifikasi"]})]}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-stone-100 p-6",children:[n==="general"&&e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-bold text-primary-dark border-b border-stone-100 pb-2",children:"Informasi Perpustakaan"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Nama Perpustakaan"}),e.jsx("input",{type:"text",value:r.libraryName,onChange:s=>i({...r,libraryName:s.target.value}),className:"w-full p-2.5 border border-stone-300 rounded-lg focus:ring-2 focus:ring-primary outline-none transition"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Alamat Lengkap"}),e.jsx("textarea",{rows:3,value:r.address,onChange:s=>i({...r,address:s.target.value}),className:"w-full p-2.5 border border-stone-300 rounded-lg focus:ring-2 focus:ring-primary outline-none transition"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Email Kontak"}),e.jsx("input",{type:"email",value:r.email,onChange:s=>i({...r,email:s.target.value}),className:"w-full p-2.5 border border-stone-300 rounded-lg focus:ring-2 focus:ring-primary outline-none transition"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Nomor Telepon"}),e.jsx("input",{type:"tel",value:r.phone,onChange:s=>i({...r,phone:s.target.value}),className:"w-full p-2.5 border border-stone-300 rounded-lg focus:ring-2 focus:ring-primary outline-none transition"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",className:"flex items-center gap-2 bg-primary hover:bg-primary-dark text-white px-6 py-2.5 rounded-lg font-medium shadow-sm transition-colors",children:[e.jsx(R,{size:18}),"Simpan Perubahan"]})})]}),n==="security"&&e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-bold text-primary-dark border-b border-stone-100 pb-2",children:"Ubah Password"}),e.jsxs("div",{className:"max-w-md space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Password Saat Ini"}),e.jsx("input",{type:"password",className:"w-full p-2.5 border border-stone-300 rounded-lg focus:ring-2 focus:ring-primary outline-none transition"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Password Baru"}),e.jsx("input",{type:"password",className:"w-full p-2.5 border border-stone-300 rounded-lg focus:ring-2 focus:ring-primary outline-none transition"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Konfirmasi Password Baru"}),e.jsx("input",{type:"password",className:"w-full p-2.5 border border-stone-300 rounded-lg focus:ring-2 focus:ring-primary outline-none transition"})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs("button",{type:"submit",className:"flex items-center gap-2 bg-primary hover:bg-primary-dark text-white px-6 py-2.5 rounded-lg font-medium shadow-sm transition-colors",children:[e.jsx(R,{size:18}),"Update Password"]})})]}),n==="notifications"&&e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-bold text-primary-dark border-b border-stone-100 pb-2",children:"Preferensi Notifikasi"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-stone-50 rounded-lg border border-stone-100",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-text-primary",children:"Notifikasi Email"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"Aktifkan notifikasi via email utama."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.email,onChange:s=>d({...t,email:s.target.checked})}),e.jsx("div",{className:"w-11 h-6 bg-stone-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]}),e.jsxs("div",{className:"pl-4 space-y-4 border-l-2 border-stone-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-text-primary",children:"Anggota Baru Mendaftar"}),e.jsx("input",{type:"checkbox",checked:t.newMember,onChange:s=>d({...t,newMember:s.target.checked}),className:"w-4 h-4 text-primary bg-gray-100 border-gray-300 rounded focus:ring-primary",disabled:!t.email})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-text-primary",children:"Buku Jatuh Tempo"}),e.jsx("input",{type:"checkbox",checked:t.overdue,onChange:s=>d({...t,overdue:s.target.checked}),className:"w-4 h-4 text-primary bg-gray-100 border-gray-300 rounded focus:ring-primary",disabled:!t.email})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-text-primary",children:"Laporan Mingguan"}),e.jsx("input",{type:"checkbox",checked:t.weeklyReport,onChange:s=>d({...t,weeklyReport:s.target.checked}),className:"w-4 h-4 text-primary bg-gray-100 border-gray-300 rounded focus:ring-primary",disabled:!t.email})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs("button",{type:"submit",className:"flex items-center gap-2 bg-primary hover:bg-primary-dark text-white px-6 py-2.5 rounded-lg font-medium shadow-sm transition-colors",children:[e.jsx(R,{size:18}),"Simpan Preferensi"]})})]})]})})]})]})}function Ge(){const n=B(),{loans:l,books:r}=D(),[i,a]=u.useState("card"),o=localStorage.getItem("userSession"),t=o?JSON.parse(o):null,[d,p]=u.useState({name:(t==null?void 0:t.name)||"",email:(t==null?void 0:t.email)||"",password:"",confirmPassword:""}),[s,f]=u.useState(!1);if(!t||t.role!=="member")return e.jsxs("div",{className:"text-center py-20",children:[e.jsx("p",{children:"Anda belum login."}),e.jsx("button",{onClick:()=>n("/login"),className:"text-primary underline",children:"Login"})]});const N=c=>{c.preventDefault(),f(!0),setTimeout(()=>{const g={...t,name:d.name,email:d.email};localStorage.setItem("userSession",JSON.stringify(g)),alert("Profil berhasil diperbarui!"),f(!1),window.location.reload()},1e3)},j=()=>{localStorage.removeItem("userSession"),localStorage.removeItem("isAdmin"),n("/login")},C=l.filter(c=>c.memberId===t.id),S=C.filter(c=>c.status==="borrowed"||c.status==="overdue"),P=C.filter(c=>c.status==="returned"),m=C.filter(c=>c.status==="overdue"),b=c=>r.find(g=>g.id===c);let h="Pembaca Pemula",v="bg-emerald-500";const x=P.length,L=x*10;return x>10?(h="Kutu Buku",v="bg-amber-500"):x>=3&&(h="Pembaca Aktif",v="bg-emerald-600"),e.jsx("div",{className:"container mx-auto px-4 py-8 bg-stone-50 min-h-screen",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-primary-dark font-serif",children:"Dashboard Anggota"}),e.jsxs("button",{onClick:()=>n("/"),className:"flex items-center text-stone-600 hover:text-primary transition font-medium",children:[e.jsx(Z,{className:"mr-2 h-4 w-4"}),"Kembali ke Beranda"]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-stone-100 p-6 md:p-8 mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-center md:items-start",children:[e.jsxs("div",{className:"flex flex-col items-center text-center md:w-1/3 border-b md:border-b-0 md:border-r border-stone-100 pb-6 md:pb-0 md:pr-8",children:[e.jsx("div",{className:"w-24 h-24 bg-stone-100 rounded-full flex items-center justify-center mb-4 text-stone-300",children:e.jsx(M,{className:"h-12 w-12"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-1",children:t.name}),e.jsx("p",{className:"text-stone-500 text-sm mb-1",children:"Anggota Perpustakaan"}),e.jsxs("p",{className:"text-stone-400 text-xs",children:["Bergabung sejak ",t.joinDate]})]}),e.jsxs("div",{className:"flex-1 w-full",children:[e.jsxs("div",{className:`${v} rounded-xl p-6 text-white flex justify-between items-center mb-6 shadow-lg relative overflow-hidden`,children:[e.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-white/20 rounded-full blur-xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 -mb-4 -ml-4 w-24 h-24 bg-black/10 rounded-full blur-xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-white/80 text-sm font-medium mb-1",children:"Level Keanggotaan"}),e.jsx("h3",{className:"text-2xl md:text-3xl font-bold tracking-tight",children:h})]}),e.jsxs("div",{className:"relative z-10 text-right",children:[e.jsx("h4",{className:"text-3xl font-bold",children:L}),e.jsx("p",{className:"text-white/80 text-xs font-medium",children:"Poin Literasi"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-stone-50 rounded-xl p-4 text-center border border-stone-100 hover:border-primary/20 transition cursor-default",children:[e.jsx("p",{className:"text-xs text-stone-500 uppercase tracking-wider font-semibold mb-1",children:"Buku Dipinjam"}),e.jsx("p",{className:"text-2xl font-bold text-primary-dark",children:S.length})]}),e.jsxs("div",{className:"bg-stone-50 rounded-xl p-4 text-center border border-stone-100 hover:border-primary/20 transition cursor-default",children:[e.jsx("p",{className:"text-xs text-stone-500 uppercase tracking-wider font-semibold mb-1",children:"Buku Selesai"}),e.jsx("p",{className:"text-2xl font-bold text-accent-dark",children:x})]}),e.jsxs("div",{className:"bg-stone-50 rounded-xl p-4 text-center border border-stone-100 hover:border-primary/20 transition cursor-default",children:[e.jsx("p",{className:"text-xs text-stone-500 uppercase tracking-wider font-semibold mb-1",children:"Terlambat"}),e.jsx("p",{className:`text-2xl font-bold ${m.length>0?"text-red-500":"text-stone-400"}`,children:m.length})]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-8",children:[e.jsx("div",{className:"md:col-span-4 lg:col-span-3 space-y-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-stone-100 overflow-hidden",children:[e.jsx("div",{className:"p-4 font-bold text-gray-800 border-b border-stone-100",children:"Menu Anggota"}),e.jsxs("div",{className:"flex flex-col p-2 space-y-1",children:[e.jsxs("button",{onClick:()=>a("card"),className:`flex items-center px-4 py-3 rounded-lg text-sm font-medium transition ${i==="card"?"bg-primary/5 text-primary":"text-stone-600 hover:bg-stone-50"}`,children:[e.jsx(pe,{className:"h-5 w-5 mr-3"}),"Kartu Anggota"]}),e.jsxs("button",{onClick:()=>a("loans"),className:`flex items-center px-4 py-3 rounded-lg text-sm font-medium transition ${i==="loans"?"bg-primary/5 text-primary":"text-stone-600 hover:bg-stone-50"}`,children:[e.jsx(G,{className:"h-5 w-5 mr-3"}),"Riwayat Peminjaman"]}),e.jsxs("button",{onClick:()=>a("settings"),className:`flex items-center px-4 py-3 rounded-lg text-sm font-medium transition ${i==="settings"?"bg-primary/5 text-primary":"text-stone-600 hover:bg-stone-50"}`,children:[e.jsx(K,{className:"h-5 w-5 mr-3"}),"Pengaturan Profil"]}),e.jsxs("button",{className:"flex items-center px-4 py-3 rounded-lg text-sm font-medium text-stone-600 hover:bg-stone-50 transition opacity-50 cursor-not-allowed",title:"Coming Soon",children:[e.jsx(be,{className:"h-5 w-5 mr-3"}),"Bantuan"]})]}),e.jsx("div",{className:"p-2 border-t border-stone-100 mt-2",children:e.jsxs("button",{onClick:j,className:"flex w-full items-center px-4 py-3 rounded-lg text-sm font-medium text-red-600 hover:bg-red-50 transition",children:[e.jsx(Y,{className:"h-5 w-5 mr-3"}),"Keluar"]})})]})}),e.jsxs("div",{className:"md:col-span-8 lg:col-span-9",children:[i==="card"&&e.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-sm border border-stone-100 flex flex-col items-center animate-fade-in relative",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-6 self-start",children:"Kartu Anggota Digital"}),e.jsxs("div",{id:"member-card",className:"w-full max-w-md bg-gradient-to-br from-primary to-secondary rounded-xl overflow-hidden shadow-2xl relative text-white p-6 aspect-[1.58/1] transform transition hover:scale-[1.02] duration-300",children:[e.jsx("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 bg-white/10 rounded-full blur-2xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 -mb-10 -ml-10 w-40 h-40 bg-accent/20 rounded-full blur-2xl"}),e.jsxs("div",{className:"relative z-10 h-full flex flex-col justify-between",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-white/20 p-2 rounded-lg backdrop-blur-sm",children:e.jsx(ge,{className:"h-6 w-6 text-accent"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg leading-tight",children:"Perpustakaan Desa"}),e.jsx("p",{className:"text-xs text-white/80",children:"Cingkrong, Grobogan"})]})]}),e.jsx("div",{className:"bg-white/20 px-3 py-1 rounded-full text-xs font-mono backdrop-blur-sm border border-white/10",children:"MEMBER CARD"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/60 uppercase tracking-wider mb-1",children:"Nama Anggota"}),e.jsx("h2",{className:"text-2xl font-bold font-serif tracking-wide truncate",children:t.name})]}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/60 uppercase tracking-wider mb-1",children:"ID Anggota"}),e.jsx("p",{className:"font-mono text-lg",children:t.id})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/60 uppercase tracking-wider mb-1 text-right",children:"Bergabung"}),e.jsx("p",{className:"font-medium text-right",children:t.joinDate||"2024"})]})]}),e.jsxs("div",{className:"pt-2 border-t border-white/10 flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-white/80",children:"Level Membaca"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(fe,{className:"h-4 w-4 text-accent"}),e.jsx("span",{className:"font-bold text-accent tracking-wide",children:h})]})]})]})]})]}),e.jsx("div",{className:"mt-8 flex gap-4 w-full max-w-md print:hidden",children:e.jsxs("button",{onClick:()=>window.print(),className:"flex-1 flex items-center justify-center gap-2 py-3 bg-stone-100 hover:bg-stone-200 text-stone-700 rounded-lg font-medium transition",children:[e.jsx(je,{size:18}),"Cetak Kartu"]})})]}),i==="loans"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-stone-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-stone-100 pb-4",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg text-orange-600",children:e.jsx(I,{className:"h-5 w-5"})}),e.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Sedang Dipinjam"}),e.jsxs("span",{className:"ml-auto bg-orange-100 text-orange-700 py-1 px-3 rounded-full text-xs font-bold",children:[S.length," Buku"]})]}),S.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-4",children:S.map(c=>{const g=b(c.bookId);return e.jsxs("div",{className:"flex p-4 rounded-xl border border-stone-100 hover:shadow-md transition bg-stone-50/50",children:[e.jsx("div",{className:"w-16 h-24 bg-stone-200 rounded-md overflow-hidden flex-shrink-0 shadow-sm",children:(g==null?void 0:g.cover)&&e.jsx("img",{src:g.cover,alt:g.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"ml-4 flex-grow flex flex-col justify-center",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:(g==null?void 0:g.title)||"Unknown Book"}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:g==null?void 0:g.author}),e.jsxs("div",{className:"flex gap-4 text-xs",children:[e.jsxs("span",{className:"flex items-center text-stone-600 bg-white px-2 py-1 rounded border border-stone-200",children:[e.jsx(T,{className:"h-3 w-3 mr-1.5"}),"Pinjam: ",c.loanDate]}),e.jsxs("span",{className:`flex items-center font-bold px-2 py-1 rounded border ${c.status==="overdue"?"bg-red-50 text-red-600 border-red-200":"bg-green-50 text-green-600 border-green-200"}`,children:[e.jsx(T,{className:"h-3 w-3 mr-1.5"}),"Tempo: ",c.dueDate,c.status==="overdue"&&" (Terlambat)"]})]})]})]},c.id)})}):e.jsxs("div",{className:"text-center py-10 bg-stone-50 rounded-lg border border-dashed border-stone-200",children:[e.jsx(I,{className:"h-10 w-10 text-stone-300 mx-auto mb-3"}),e.jsx("p",{className:"text-stone-500 font-medium",children:"Tidak ada buku yang sedang dipinjam."}),e.jsx("button",{onClick:()=>n("/katalog"),className:"mt-4 text-primary font-bold text-sm hover:underline",children:"Cari Buku di Katalog"})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-stone-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-stone-100 pb-4",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg text-green-600",children:e.jsx(G,{className:"h-5 w-5"})}),e.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Riwayat Pengembalian"}),e.jsxs("span",{className:"ml-auto bg-stone-100 text-stone-600 py-1 px-3 rounded-full text-xs font-bold",children:[P.length," Arsip"]})]}),P.length>0?e.jsx("div",{className:"divide-y divide-stone-100",children:P.map(c=>{const g=b(c.bookId);return e.jsxs("div",{className:"py-4 flex justify-between items-center group hover:bg-stone-50 transition px-2 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800",children:g==null?void 0:g.title}),e.jsxs("p",{className:"text-xs text-stone-500 mt-1",children:[e.jsxs("span",{className:"inline-block mr-3",children:["Dipinjam: ",c.loanDate]}),e.jsxs("span",{children:["Dikembalikan: ",c.dueDate]})]})]}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-xs rounded-full font-bold shadow-sm",children:"Selesai"})]},c.id)})}):e.jsx("p",{className:"text-stone-500 text-sm text-center py-4",children:"Belum ada riwayat peminjaman."})]})]}),i==="settings"&&e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-stone-100 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-stone-100 pb-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg text-blue-600",children:e.jsx(K,{className:"h-5 w-5"})}),e.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Pengaturan Profil"})]}),e.jsx("form",{onSubmit:N,className:"max-w-lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Nama Lengkap"}),e.jsx("input",{type:"text",value:d.name,onChange:c=>p({...d,name:c.target.value}),className:"w-full px-4 py-2 border border-stone-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none transition",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",value:d.email,onChange:c=>p({...d,email:c.target.value}),className:"w-full px-4 py-2 border border-stone-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none transition",required:!0})]}),e.jsxs("div",{className:"pt-4 border-t border-stone-100 mt-4",children:[e.jsx("h3",{className:"text-sm font-bold text-stone-800 mb-3",children:"Ganti Password"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Password Baru"}),e.jsx("input",{type:"password",value:d.password,onChange:c=>p({...d,password:c.target.value}),className:"w-full px-4 py-2 border border-stone-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none transition",placeholder:"Kosongkan jika tidak ingin mengubah"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Konfirmasi Password"}),e.jsx("input",{type:"password",value:d.confirmPassword,onChange:c=>p({...d,confirmPassword:c.target.value}),className:"w-full px-4 py-2 border border-stone-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none transition",placeholder:"Ulangi password baru"})]})]})]}),e.jsx("div",{className:"pt-6",children:e.jsx("button",{type:"submit",disabled:s,className:"px-6 py-2 bg-primary hover:bg-primary-dark text-white font-bold rounded-lg transition shadow-md disabled:opacity-70 flex items-center gap-2",children:s?"Menyimpan...":"Simpan Perubahan"})})]})})]})]})]})]})})}function _e(){return e.jsx(ze,{children:e.jsx(we,{children:e.jsxs(ke,{children:[e.jsxs(w,{element:e.jsx(Be,{}),children:[e.jsx(w,{path:"/",element:e.jsx(Ie,{})}),e.jsx(w,{path:"/katalog",element:e.jsx(Re,{})}),e.jsx(w,{path:"/book/:id",element:e.jsx(Ue,{})}),e.jsx(w,{path:"/daftar",element:e.jsx(Ke,{})}),e.jsx(w,{path:"/profile",element:e.jsx(Ge,{})})]}),e.jsx(w,{path:"/login",element:e.jsx(Oe,{})}),e.jsx(w,{element:e.jsx(Ae,{}),children:e.jsxs(w,{path:"/admin",element:e.jsx(Le,{}),children:[e.jsx(w,{index:!0,element:e.jsx(Q,{to:"/admin/dashboard",replace:!0})}),e.jsx(w,{path:"dashboard",element:e.jsx(Je,{})}),e.jsx(w,{path:"books",element:e.jsx(Fe,{})}),e.jsx(w,{path:"members",element:e.jsx($e,{})}),e.jsx(w,{path:"settings",element:e.jsx(qe,{})})]})})]})})})}O.createRoot(document.getElementById("root")).render(e.jsx(Se.StrictMode,{children:e.jsx(_e,{})}));
